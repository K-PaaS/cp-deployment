apiVersion: v1
data:
{% if external_vsphere_version >= "7.0" %}
  "csi-auth-check": "true"
{% else %}
  "csi-auth-check": "false"
{% endif %}
  "csi-auth-check": "true"
  "online-volume-extend": "true"
  "trigger-csi-fullsync": "false"
  "async-query-volume": "true"
  "block-volume-snapshot": "true"
  "csi-windows-support": "false"
  "list-volumes": "true"
  "pv-to-backingdiskobjectid-mapping": "false"
  "cnsmgr-suspend-create-volume": "true"
  "topology-preferential-datastores": "true"
  "max-pvscsi-targets-per-vm": "true"
  "multi-vcenter-csi-topology": "true"
  "csi-internal-generated-cluster-id": "true"
  "listview-tasks": "true" 
{% if vsphere_csi_controller is version('v2.7.0', '>=') %}
  "improved-csi-idempotency": "true"
  "improved-volume-topology": "true"
  "use-csinode-id": "true"
  "list-volumes": "false"
{% endif %}
kind: ConfigMap
metadata:
  name: internal-feature-states.csi.vsphere.vmware.com
  namespace: "{{ vsphere_csi_namespace }}"
